<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="354px" preserveAspectRatio="none" style="width:675px;height:354px;" version="1.1" viewBox="0 0 675 354" width="675px" zoomAndPan="magnify"><defs><filter height="300%" id="f2jmjb37rfslu" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="126" x="268.25" y="20.6279">享元模式结构图</text><!--MD5=[3624bd638c8ffd9eacb7291c4daabaf3]
class FlyweightFactory--><rect codeLine="2" fill="#FEFECE" filter="url(#f2jmjb37rfslu)" height="78.0459" id="FlyweightFactory" style="stroke:#A80036;stroke-width:1.5;" width="194" x="7" y="139.583"/><ellipse cx="54.75" cy="155.583" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M53.3281,160.9424 Q51.4688,160.9424 50.375,159.5518 Q49.2813,158.1611 49.2813,155.1768 Q49.2813,152.6455 50.4453,150.9893 Q51.6094,149.333 53.5938,149.333 Q55.0625,149.333 55.5313,149.458 Q56,149.6611 56,149.6611 Q56,149.6611 56,149.5908 Q56,149.5205 56.6094,148.5986 L57.6563,152.2549 L56.3281,152.6611 Q55.8594,151.1143 55.1953,150.4502 Q54.5313,149.7861 53.4688,149.7861 Q53.0781,149.7861 52.3125,151.3174 Q51.5469,152.8486 51.5469,155.0986 Q51.5469,157.5674 52.2109,158.958 Q52.875,160.3486 53.4063,160.3486 Q54.4688,160.3486 55.2266,159.583 Q55.9844,158.8174 56.3281,157.1611 L57.6563,157.7549 Q57.3281,159.1611 56.4297,160.0518 Q55.5313,160.9424 53.3281,160.9424 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="90" x="75.25" y="161.1406">FlyweightFactory</text><line style="stroke:#A80036;stroke-width:1.5;" x1="8" x2="200" y1="171.583" y2="171.583"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="179.583"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="143" x="27" y="188.189">fsMap:map&lt;String,Flyweight&gt;</text><line style="stroke:#A80036;stroke-width:1.5;" x1="8" x2="200" y1="194.606" y2="194.606"/><ellipse cx="18" cy="205.606" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="168" x="27" y="211.2119">getFlyweight(key:String):Flyweight</text><!--MD5=[ed6624c6556d5e7b1bd23032162d20b7]
class Client--><rect codeLine="6" fill="#FEFECE" filter="url(#f2jmjb37rfslu)" height="48" id="Client" style="stroke:#A80036;stroke-width:1.5;" width="64" x="300" y="31.583"/><ellipse cx="315" cy="47.583" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M313.5781,52.9424 Q311.7188,52.9424 310.625,51.5518 Q309.5313,50.1611 309.5313,47.1768 Q309.5313,44.6455 310.6953,42.9893 Q311.8594,41.333 313.8438,41.333 Q315.3125,41.333 315.7813,41.458 Q316.25,41.6611 316.25,41.6611 Q316.25,41.6611 316.25,41.5908 Q316.25,41.5205 316.8594,40.5986 L317.9063,44.2549 L316.5781,44.6611 Q316.1094,43.1143 315.4453,42.4502 Q314.7813,41.7861 313.7188,41.7861 Q313.3281,41.7861 312.5625,43.3174 Q311.7969,44.8486 311.7969,47.0986 Q311.7969,49.5674 312.4609,50.958 Q313.125,52.3486 313.6563,52.3486 Q314.7188,52.3486 315.4766,51.583 Q316.2344,50.8174 316.5781,49.1611 L317.9063,49.7549 Q317.5781,51.1611 316.6797,52.0518 Q315.7813,52.9424 313.5781,52.9424 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="32" x="329" y="53.1406">Client</text><line style="stroke:#A80036;stroke-width:1.5;" x1="301" x2="363" y1="63.583" y2="63.583"/><line style="stroke:#A80036;stroke-width:1.5;" x1="301" x2="363" y1="71.583" y2="71.583"/><!--MD5=[64f2773a896c416931a6705ec1e9a6bc]
class ConcreteFlyweight--><rect codeLine="7" fill="#FEFECE" filter="url(#f2jmjb37rfslu)" height="78.0459" id="ConcreteFlyweight" style="stroke:#A80036;stroke-width:1.5;" width="191" x="236.5" y="139.583"/><ellipse cx="277.6" cy="155.583" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M276.1781,160.9424 Q274.3188,160.9424 273.225,159.5518 Q272.1313,158.1611 272.1313,155.1768 Q272.1313,152.6455 273.2953,150.9893 Q274.4594,149.333 276.4438,149.333 Q277.9125,149.333 278.3813,149.458 Q278.85,149.6611 278.85,149.6611 Q278.85,149.6611 278.85,149.5908 Q278.85,149.5205 279.4594,148.5986 L280.5063,152.2549 L279.1781,152.6611 Q278.7094,151.1143 278.0453,150.4502 Q277.3813,149.7861 276.3188,149.7861 Q275.9281,149.7861 275.1625,151.3174 Q274.3969,152.8486 274.3969,155.0986 Q274.3969,157.5674 275.0609,158.958 Q275.725,160.3486 276.2563,160.3486 Q277.3188,160.3486 278.0766,159.583 Q278.8344,158.8174 279.1781,157.1611 L280.5063,157.7549 Q280.1781,159.1611 279.2797,160.0518 Q278.3813,160.9424 276.1781,160.9424 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="101" x="297.4" y="161.1406">ConcreteFlyweight</text><line style="stroke:#A80036;stroke-width:1.5;" x1="237.5" x2="426.5" y1="171.583" y2="171.583"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="244.5" y="179.583"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="93" x="256.5" y="188.189">intrinsicState:String</text><line style="stroke:#A80036;stroke-width:1.5;" x1="237.5" x2="426.5" y1="194.606" y2="194.606"/><ellipse cx="247.5" cy="205.606" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="165" x="256.5" y="211.2119">operation(extringState:String) void</text><!--MD5=[0f9f5b132fe1117282936dc99885cc40]
class Flyweight--><rect codeLine="11" fill="#FEFECE" filter="url(#f2jmjb37rfslu)" height="63.0229" id="Flyweight" style="stroke:#A80036;stroke-width:1.5;" width="199" x="232.5" y="277.583"/><ellipse cx="302.25" cy="293.583" fill="#B4A7E5" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M298.8438,287.8643 L298.8438,287.458 L305.1563,287.458 L305.1563,287.8643 L302.625,287.8643 Q302.625,287.8643 302.7734,287.9971 Q302.9219,288.1299 302.9219,288.3955 L302.9219,297.8799 Q302.9219,298.1455 303.1406,298.2783 Q303.3594,298.4111 303.3594,298.4111 L305.1563,298.4111 L305.1563,298.8174 L298.8438,298.8174 L298.8438,298.4111 L300.375,298.4111 Q300.7031,298.4111 300.8359,298.2783 Q300.9688,298.1455 300.9688,297.8799 L300.9688,288.3955 Q300.9688,288.1299 300.8359,287.9971 Q300.7031,287.8643 300.375,287.8643 L298.8438,287.8643 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="51" x="322.75" y="299.1406">Flyweight</text><line style="stroke:#A80036;stroke-width:1.5;" x1="233.5" x2="430.5" y1="309.583" y2="309.583"/><line style="stroke:#A80036;stroke-width:1.5;" x1="233.5" x2="430.5" y1="317.583" y2="317.583"/><ellipse cx="243.5" cy="328.583" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="173" x="252.5" y="334.189">operation(extrinsicState:String) void</text><!--MD5=[1697d3ca731240670a903cddff71168d]
class UnshareConcreteFlyweight--><rect codeLine="14" fill="#FEFECE" filter="url(#f2jmjb37rfslu)" height="78.0459" id="UnshareConcreteFlyweight" style="stroke:#A80036;stroke-width:1.5;" width="199" x="462.5" y="139.583"/><ellipse cx="485.6" cy="155.583" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M484.1781,160.9424 Q482.3188,160.9424 481.225,159.5518 Q480.1313,158.1611 480.1313,155.1768 Q480.1313,152.6455 481.2953,150.9893 Q482.4594,149.333 484.4438,149.333 Q485.9125,149.333 486.3813,149.458 Q486.85,149.6611 486.85,149.6611 Q486.85,149.6611 486.85,149.5908 Q486.85,149.5205 487.4594,148.5986 L488.5063,152.2549 L487.1781,152.6611 Q486.7094,151.1143 486.0453,150.4502 Q485.3813,149.7861 484.3188,149.7861 Q483.9281,149.7861 483.1625,151.3174 Q482.3969,152.8486 482.3969,155.0986 Q482.3969,157.5674 483.0609,158.958 Q483.725,160.3486 484.2563,160.3486 Q485.3188,160.3486 486.0766,159.583 Q486.8344,158.8174 487.1781,157.1611 L488.5063,157.7549 Q488.1781,159.1611 487.2797,160.0518 Q486.3813,160.9424 484.1781,160.9424 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="149" x="501.4" y="161.1406">UnshareConcreteFlyweight</text><line style="stroke:#A80036;stroke-width:1.5;" x1="463.5" x2="660.5" y1="171.583" y2="171.583"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="470.5" y="179.583"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="66" x="482.5" y="188.189">allState:String</text><line style="stroke:#A80036;stroke-width:1.5;" x1="463.5" x2="660.5" y1="194.606" y2="194.606"/><ellipse cx="473.5" cy="205.606" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="173" x="482.5" y="211.2119">operation(extrinsicState:String) void</text><!--MD5=[2c24fe898ab139493bf456b7055609cd]
link Client to FlyweightFactory--><path codeLine="19" d="M299.82,73.663 C269.03,90.003 221.42,115.273 180.85,136.793 " fill="none" id="Client-to-FlyweightFactory" style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#A80036" points="175.94,139.403,185.7649,138.7169,180.3565,137.059,182.0145,131.6505,175.94,139.403" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[dfd42767b6c4f6660d0612ac3292afca]
link Client to ConcreteFlyweight--><path codeLine="20" d="M332,79.623 C332,95.043 332,115.813 332,134.263 " fill="none" id="Client-to-ConcreteFlyweight" style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#A80036" points="332,139.393,336,130.393,332,134.393,328,130.393,332,139.393" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[d21350724114a12b917e3b61cb5eb90d]
link Client to UnshareConcreteFlyweight--><path codeLine="21" d="M364.47,73.663 C395.65,90.063 443.94,115.473 484.97,137.063 " fill="none" id="Client-to-UnshareConcreteFlyweight" style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#A80036" points="489.43,139.403,483.3256,131.6741,485.0045,137.076,479.6025,138.7549,489.43,139.403" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[fabd904a2dc4226c8e709362c45bb26c]
link ConcreteFlyweight to Flyweight--><path codeLine="22" d="M332,217.793 C332,230.163 332,244.093 332,257.243 " fill="none" id="ConcreteFlyweight-to-Flyweight" style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="339,257.553,332,277.553,325,257.553,339,257.553" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[d8787893cf251dcbe97353b69578204a]
link UnshareConcreteFlyweight to Flyweight--><path codeLine="23" d="M493.93,217.613 C465.76,233.353 433.06,251.623 404.44,267.613 " fill="none" id="UnshareConcreteFlyweight-to-Flyweight" style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="407.66,273.833,386.78,277.473,400.83,261.613,407.66,273.833" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[f2721bd3f964f918b3ad5e1fd629c08f]
link FlyweightFactory to Flyweight--><path codeLine="24" d="M181.9336,223.5055 C181.9336,223.5055 240.05,256.263 266.06,270.923 " fill="none" id="FlyweightFactory-Flyweight" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="277.69,277.473,271.8107,269.5715,273.3333,275.0196,267.8852,276.5423,277.69,277.473" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="273.3333" x2="266.37" y1="275.0196" y2="271.093"/><polygon fill="#FFFFFF" points="171.48,217.613,174.7426,224.0438,181.9336,223.5055,178.671,217.0747,171.48,217.613" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[8717307c6d1ff459a35881eb45e2a7e8]
@startuml flyweight
title 享元模式结构图
class FlyweightFactory{
    -fsMap:map<String,Flyweight>
    +getFlyweight(key:String):Flyweight
}
class Client{}
class ConcreteFlyweight{
    -intrinsicState:String
    +operation(extringState:String) void
}
interface Flyweight{
    +operation(extrinsicState:String) void
}
class UnshareConcreteFlyweight{
    -allState:String
    +operation(extrinsicState:String) void
}

Client ..> FlyweightFactory
Client ..> ConcreteFlyweight
Client ..> UnshareConcreteFlyweight
ConcreteFlyweight ..|> Flyweight
UnshareConcreteFlyweight ..|> Flyweight
FlyweightFactory o- -> Flyweight

@enduml

PlantUML version 1.2021.00(Sun Jan 10 18:25:05 CST 2021)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: GBK
Language: zh
Country: CN
--></g></svg>